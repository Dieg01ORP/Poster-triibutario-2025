<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Poster Tributario Completo</title>

    <!-- ================================
         游댏 CABECERAS DE SEGURIDAD CSP
         ================================= -->
    <meta http-equiv="Content-Security-Policy"
        content="
            default-src 'self';
            img-src 'self' data: blob:;
            script-src 'self' https://cdn.tailwindcss.com https://cdnjs.cloudflare.com https://unpkg.com 'unsafe-inline';
            style-src 'self' 'unsafe-inline' https://cdnjs.cloudflare.com https://fonts.googleapis.com;
            font-src 'self' https://fonts.gstatic.com https://cdnjs.cloudflare.com;
            object-src 'none';
            frame-ancestors 'none';
            base-uri 'self';
            connect-src 'self';
        ">
    <meta http-equiv="X-Frame-Options" content="DENY">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta name="referrer" content="strict-origin-when-cross-origin">

    <meta http-equiv="Permissions-Policy"
        content="
            geolocation=(),
            microphone=(),
            camera=(),
            usb=(),
            payment=(),
            vr=(),
            accelerometer=(),
            gyroscope=(),
            magnetometer=()
        ">

    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Oswald:wght@400;700&family=Roboto+Condensed:wght@400;700&display=swap');

        #zoomWrap {
            transform: scale(1.0);
            transform-origin: top center;
        }

        body {
            background-color: #333;
            font-family: 'Roboto Condensed', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }

        .poster {
            width: 500px;
            background: white;
            position: relative;
            box-shadow: 0 0 50px rgba(0,0,0,0.5);
            display: flex;
            flex-direction: column;
        }
        
        .logo-superior {
        position: absolute;
        top: 10px;       
        left: 20px;    
        width: 50px;    
        z-index: 999;
        }

        .title-font {
            font-family: 'Oswald', sans-serif;
        }

        .section-title {
            background: #166534;
            color: white;
            padding: 5px 15px;
            font-size: 1.1rem;
            text-transform: uppercase;
            font-weight: bold;
            display: inline-block;
            margin-bottom: 10px;
            transform: skew(-10deg);
        }

        .section-title span {
            display: block;
            transform: skew(10deg);
        }

        .img-container {
            overflow: hidden;
            position: relative;
        }

        .img-container img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s;
        }
    </style>
</head>

<body>
    <div id="zoomWrap">
        <div class="poster">
            
            <img src="imagenes/logo2.webp" class="logo-superior" alt="Logo" crossorigin="anonymous">

            <!-- 1. CABECERA (Imagen Municipalidad) -->
            <div class="relative h-48">
                <img src="imagenes/img1.jpg" class="w-full h-full object-cover" crossorigin="anonymous">
                <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-transparent to-transparent"></div>
                <div class="absolute bottom-4 left-4 text-white">
                    <p class="text-yellow-400 text-sm font-bold tracking-wider uppercase mb-1">Municipalidad de Puente Piedra</p>
                    <h1 class="title-font text-4xl leading-none uppercase">Gu칤a de Orientaci칩n<br>Tributaria 2025</h1>
                </div>
            </div>

            <!-- 2. BENEFICIOS (Seguridad y Casa) -->
            <div class="p-4 bg-gray-100">
                <div class="section-title"><span>쯇or qu칠 pagar?</span></div>

                <!-- FILA 1: 2 im치genes -->
                <div class="flex gap-2 h-32 mb-2">
                    <div class="w-1/2 relative rounded-lg overflow-hidden border-2 border-white shadow">
                        <img src="imagenes/img2.jpg" class="w-full h-full object-cover" crossorigin="anonymous">
                        <span class="absolute bottom-0 left-0 bg-blue-800 text-white text-xs px-2 py-1 font-bold">M치s Seguridad</span>
                    </div>
                    <div class="w-1/2 relative rounded-lg overflow-hidden border-2 border-white shadow">
                        <img src="imagenes/img3.jpg" class="w-full h-full object-cover" crossorigin="anonymous">
                        <span class="absolute bottom-0 left-0 bg-green-700 text-white text-xs px-2 py-1 font-bold">Mejores Obras</span>
                    </div>
                        <div class="w-1/2 relative rounded-lg overflow-hidden border-2 border-white shadow">
                        <img src="imagenes/img4.jpg" class="w-full h-full object-cover" crossorigin="anonymous">
                        <span class="absolute bottom-0 left-0 bg-yellow-500 text-white text-xs px-2 py-1 font-bold">Limpieza de calles</span>
                    </div>
                </div>

                <!-- FILA 2: 3 im치genes -->
                <div class="flex gap-2 h-32">
                    <div class="w-1/3 relative rounded-lg overflow-hidden border-2 border-white shadow">
                        <img src="imagenes/img5.jpg" class="w-full h-full object-cover" crossorigin="anonymous">
                        <span class="absolute bottom-0 left-0 bg-purple-700 text-white text-xs px-2 py-1 font-bold">Recolecci칩n de residuos</span>
                    </div>
                    <div class="w-1/3 relative rounded-lg overflow-hidden border-2 border-white shadow">
                        <img src="imagenes/img6.jpg" class="w-full h-full object-cover" crossorigin="anonymous">
                        <span class="absolute bottom-0 left-0 bg-red-700 text-white text-xs px-2 py-1 font-bold">Limpieza de parques</span>
                    </div>
                    <div class="w-1/3 relative rounded-lg overflow-hidden border-2 border-white shadow">
                        <img src="imagenes/img7.jpg" class="w-full h-full object-cover" crossorigin="anonymous">
                        <span class="absolute bottom-0 left-0 bg-yellow-700 text-white text-xs px-2 py-1 font-bold">Mejores 치reas verdes</span>
                    </div>
                </div>
            </div>


            <!-- 3. CANALES DE PAGO (Scotiabank, App y Yape) -->
            <div class="p-4 bg-white">
                <div class="section-title bg-red-700"><span>쮻칩nde pagar?</span></div>
                <div class="grid grid-cols-3 gap-2 text-center">
                    <!-- Banco -->
                    <div class="flex flex-col items-center">
                        <div class="h-20 w-full rounded overflow-hidden border border-gray-200 mb-1">
                            <img src="imagenes/img8.jpg" class="w-full h-full object-cover" crossorigin="anonymous">
                        </div>
                        <span class="text-xs font-bold text-gray-600">Agencias</span>
                    </div>
                    <!-- App -->
                    <div class="flex flex-col items-center">
                        <div class="h-20 w-full rounded overflow-hidden border border-gray-200 mb-1 bg-gray-50">
                            <img src="imagenes/img9.svg" class="w-full h-full object-contain p-1" crossorigin="anonymous">
                        </div>
                        <span class="text-xs font-bold text-gray-600">Banca m칩vil Scotiabank</span>
                    </div>
                    <!-- Yape -->
                    <div class="flex flex-col items-center">
                        <div class="h-20 w-full rounded overflow-hidden border border-gray-200 mb-1 bg-purple-50">
                            <img src="imagenes/img10.png" class="w-full h-full object-cover" crossorigin="anonymous">
                        </div>
                        <span class="text-xs font-bold text-gray-600">Yape</span>
                    </div>
                </div>
            </div>

            <!-- 4. FORMAS DE PAGO (Efectivo, Tarjetas, Cheques) -->
            <div class="p-4 bg-gray-50 border-t border-dashed border-gray-300">
                <p class="text-center font-bold text-gray-500 text-sm uppercase mb-3">- Aceptamos todos los medios -</p>
                <div class="flex justify-center gap-4">
                    <!-- Efectivo -->
                    <div class="w-20 h-20 rounded-full overflow-hidden border-4 border-white shadow-md relative group">
                        <img src="imagenes/img11.jpg" class="w-full h-full object-cover transform group-hover:scale-110 transition" crossorigin="anonymous"> 
                    </div>
                    <!-- Tarjetas -->
                    <div class="w-20 h-20 rounded-full overflow-hidden border-4 border-white shadow-md relative group">
                        <img src="imagenes/img14.jpg" class="w-full h-full object-cover transform group-hover:scale-110 transition" crossorigin="anonymous">
                    </div>
                    <!-- Cheques -->
                    <div class="w-20 h-20 rounded-full overflow-hidden border-4 border-white shadow-md relative group">
                        <img src="imagenes/img12.jpg" class="w-full h-full object-cover transform group-hover:scale-110 transition" crossorigin="anonymous">
                    </div>
                </div>
            </div>

            <!-- 5. CTA / QR -->
            <div class="bg-gray-900 text-white p-6 flex items-center justify-between mt-auto">
                <div>
                    <p class="text-yellow-400 font-bold uppercase text-lg">춰No esperes m치s!</p>
                    <p class="text-sm text-gray-300">Escanea para ver tu estado de cuenta.</p>
                    <br>
                    <p class="text-sm text-gray-300">Link: https://pagoenlinea.munipuentepiedra.gob.pe</p>
                </div>
                <div class="bg-white p-2 rounded-lg">
                    <img src="imagenes/img13.jpg" class="w-24 h-24" crossorigin="anonymous">
                </div>
            </div>

        </div>
    </div>

    <button id="downloadBtn"
        class="fixed bottom-4 right-4 bg-green-600 text-white px-4 py-2 rounded">
        Descargar como imagen
    </button>

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

<script>
window.addEventListener("load", () => {
    const btn = document.getElementById("downloadBtn");
    if (!btn) {
        console.error("NO EXISTE downloadBtn en el HTML");
        return;
    }

    btn.addEventListener("click", async () => {
        const poster = document.querySelector(".poster");

        if (!poster) {
            alert("No se encontr칩 .poster");
            return;
        }

        /** Esperar carga de im치genes **/
        const imgs = poster.querySelectorAll("img");
        await Promise.all(
            [...imgs].map(img =>
                img.complete
                    ? Promise.resolve()
                    : new Promise(res => { img.onload = img.onerror = res; })
            )
        );

        try {
            const canvas = await html2canvas(poster, {
                scale: 3,
                useCORS: true,
                allowTaint: true,
                backgroundColor: "#ffffff"
            });

            const link = document.createElement("a");
            link.download = "poster.png";
            link.href = canvas.toDataURL("image/png");
            link.click();

        } catch (err) {
            console.error("ERROR EN HTML2CANVAS:", err);
            alert("Error generando la imagen. Revisa la consola.");
        }
    });
});
</script>




</body>
</html>